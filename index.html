<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Picky Eater â€” Make recipes your way</title>
  <link rel="icon" href="./favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
  <link rel="apple-touch-icon" href="./apple-touch-icon.png">
  <link rel="manifest" href="./site.webmanifest">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
<div class="page">

<header class="topbar">
  <div class="brand">
    <div class="brand-mark"></div>
    <div>
      <div class="brand-title">Picky Eater</div>
      <div class="brand-sub">Make recipes your way</div>
    </div>
  </div>
  <button id="openDiary" class="btn ghost topbar-btn">ðŸ““ Today</button>
</header>

<main class="content">

<section class="hero card hero-tint">
  <div class="eyebrow">For picky eaters</div>
  <h1>Make recipes your way.</h1>
  <p>Start with ingredients you like. Swap what you donâ€™t. Keep it simple.</p>
</section>

<section id="inputCard" class="card">
  <label>Ingredients (one per line)</label>
  <textarea id="ingredientsInput" placeholder="ground beef&#10;broccoli&#10;potatoes&#10;onion"></textarea>
  <button id="generateBtn" class="btn primary full">Generate recipe</button>
</section>

<section id="resultCard" class="card hidden">
  <div id="recipeTitle"></div>
</section>

<script src="./app.js"></script>

<!-- HARD SAFETY GENERATE FIX -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("generateBtn");
  if (!btn) return;

  btn.addEventListener("click", () => {
    const input = document.getElementById("ingredientsInput")?.value || "";
    const lines = input.split("\n").map(l => l.trim()).filter(Boolean);
    if (!lines.length) {
      alert("Please enter at least one ingredient.");
      return;
    }

    if (typeof window.generateRecipe === "function") {
      window.generateRecipe(lines);
    } else {
      console.error("generateRecipe() not found on window");
      alert("Generator function missing. app.js is incomplete.");
    }
  });
});
</script>

</body>
</html>
